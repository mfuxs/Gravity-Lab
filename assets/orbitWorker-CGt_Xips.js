(function(){"use strict";const l=Object.freeze({G:.8,SOFTENING:5,TRAIL_LENGTH:120,PHYSICS_SUBSTEPS:8,MAX_SPEED:1e3,MAX_FORCE:5e3,MAX_POSITION:1e6,VELOCITY_DAMPING:.1}),{G:h,SOFTENING:m}=l;self.onmessage=function(p){const{bodies:u,steps:I,dt:c}=p.data,i=u.map(s=>({x:s.x,y:s.y,vx:s.vx,vy:s.vy,mass:s.mass,radius:s.radius,isStatic:s.isStatic,id:s.id,color:s.color,path:[{x:s.x,y:s.y}]}));for(let s=0;s<I;s++){for(let o=0;o<i.length;o++){const t=i[o];if(t.isStatic)continue;let d=0,r=0;for(let a=0;a<i.length;a++){if(o===a)continue;const n=i[a],e=n.x-t.x,S=n.y-t.y,x=e*e+S*S,f=Math.sqrt(x);if(f>t.radius+n.radius){const y=h*t.mass*n.mass/(x+m);d+=y*(e/f),r+=y*(S/f)}}t.vx+=d/t.mass*c,t.vy+=r/t.mass*c}for(let o=0;o<i.length;o++){const t=i[o];t.isStatic||(t.x+=t.vx*c,t.y+=t.vy*c,s%10===0&&t.path.push({x:t.x,y:t.y}))}}const N=i.map(s=>({id:s.id,color:s.color,path:s.path}));self.postMessage({paths:N})}})();
